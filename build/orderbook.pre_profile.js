function weight(x){ return 2097152 * x.network_depth + 256 * x.total_gates + 256 * x.network_size + x.preprocess_weight;}var pre_profile = { 'code':
{"source_file":"//! Encrypted instructions for Dusk Exchange\n//!\n//! This module contains the Arcis MPC circuits for:\n//! - add_order: Insert an encrypted order, update best bid/ask\n//! - match_book: Find and match crossing orders\n//!\n//! Built using Arcium's Arcis framework for confidential computation.\n\nuse arcis_imports::*;\n\n#[encrypted]\nmod orderbook {\n    use arcis_imports::*;\n\n    /// Represents a single order\n    #[derive(Copy, Clone)]\n    pub struct Order {\n        pub price: u64,\n        pub amount: u64,\n        pub owner_lo: u128,\n        pub owner_hi: u128,\n        pub order_id: u64,\n        pub side: bool, // true = buy, false = sell\n    }\n\n    /// The encrypted orderbook state - tracks best bid and ask\n    #[derive(Copy, Clone)]\n    pub struct OrderBookState {\n        pub best_bid_price: u64,\n        pub best_bid_amount: u64,\n        pub best_bid_owner_lo: u128,\n        pub best_bid_owner_hi: u128,\n        pub best_bid_id: u64,\n\n        pub best_ask_price: u64,\n        pub best_ask_amount: u64,\n        pub best_ask_owner_lo: u128,\n        pub best_ask_owner_hi: u128,\n        pub best_ask_id: u64,\n\n        pub order_count: u64,\n    }\n\n    /// Result of a match operation - revealed after computation\n    #[derive(Copy, Clone)]\n    pub struct MatchResult {\n        pub matched: bool,\n        pub maker_order_id: u64,\n        pub taker_order_id: u64,\n        pub execution_price: u64,\n        pub execution_amount: u64,\n        pub maker_lo: u128,\n        pub maker_hi: u128,\n        pub taker_lo: u128,\n        pub taker_hi: u128,\n    }\n\n    /// Add a new order to the orderbook\n    /// Updates best bid/ask if the new order is better\n    #[instruction]\n    pub fn add_order(\n        order: Enc<Shared, Order>,\n        state_ctxt: Enc<Mxe, OrderBookState>,\n    ) -> Enc<Mxe, OrderBookState> {\n        let new_order = order.to_arcis();\n        let mut state = state_ctxt.to_arcis();\n\n        if new_order.side {\n            // Buy order - update if better (higher price)\n            if new_order.price > state.best_bid_price {\n                state.best_bid_price = new_order.price;\n                state.best_bid_amount = new_order.amount;\n                state.best_bid_owner_lo = new_order.owner_lo;\n                state.best_bid_owner_hi = new_order.owner_hi;\n                state.best_bid_id = new_order.order_id;\n            }\n        } else {\n            // Sell order - update if better (lower price)\n            // Note: For initial state, best_ask_price should be very high\n            if new_order.price < state.best_ask_price {\n                state.best_ask_price = new_order.price;\n                state.best_ask_amount = new_order.amount;\n                state.best_ask_owner_lo = new_order.owner_lo;\n                state.best_ask_owner_hi = new_order.owner_hi;\n                state.best_ask_id = new_order.order_id;\n            }\n        }\n        state.order_count = state.order_count + 1;\n\n        state_ctxt.owner.from_arcis(state)\n    }\n\n    /// Remove/cancel an order from the orderbook\n    /// Only the order owner can cancel their order\n    #[instruction]\n    pub fn remove_order(\n        order_id: Enc<Shared, u64>,\n        owner_lo: Enc<Shared, u128>,\n        owner_hi: Enc<Shared, u128>,\n        state_ctxt: Enc<Mxe, OrderBookState>,\n    ) -> (Enc<Mxe, OrderBookState>, bool) {\n        let target_id = order_id.to_arcis();\n        let target_owner_lo = owner_lo.to_arcis();\n        let target_owner_hi = owner_hi.to_arcis();\n        let mut state = state_ctxt.to_arcis();\n        let mut removed = false;\n\n        // Check if it's the best bid\n        let is_best_bid = state.best_bid_id == target_id;\n        let bid_owner_match_lo = state.best_bid_owner_lo == target_owner_lo;\n        let bid_owner_match_hi = state.best_bid_owner_hi == target_owner_hi;\n        let bid_owner_match = bid_owner_match_lo && bid_owner_match_hi;\n\n        if is_best_bid && bid_owner_match {\n            // Clear the best bid\n            state.best_bid_price = 0;\n            state.best_bid_amount = 0;\n            state.best_bid_owner_lo = 0;\n            state.best_bid_owner_hi = 0;\n            state.best_bid_id = 0;\n            removed = true;\n        }\n\n        // Check if it's the best ask\n        let is_best_ask = state.best_ask_id == target_id;\n        let ask_owner_match_lo = state.best_ask_owner_lo == target_owner_lo;\n        let ask_owner_match_hi = state.best_ask_owner_hi == target_owner_hi;\n        let ask_owner_match = ask_owner_match_lo && ask_owner_match_hi;\n\n        if is_best_ask && ask_owner_match {\n            // Clear the best ask\n            state.best_ask_price = 18446744073709551615u64; // u64::MAX\n            state.best_ask_amount = 0;\n            state.best_ask_owner_lo = 0;\n            state.best_ask_owner_hi = 0;\n            state.best_ask_id = 0;\n            removed = true;\n        }\n\n        if removed {\n            state.order_count = state.order_count - 1;\n        }\n\n        (state_ctxt.owner.from_arcis(state), removed.reveal())\n    }\n\n    /// Match orders in the orderbook\n    /// If best_bid.price >= best_ask.price, a match is found\n    #[instruction]\n    pub fn match_book(\n        state_ctxt: Enc<Mxe, OrderBookState>,\n    ) -> (Enc<Mxe, OrderBookState>, MatchResult) {\n        let mut state = state_ctxt.to_arcis();\n\n        // Initialize result with no match\n        let mut result = MatchResult {\n            matched: false,\n            maker_order_id: 0,\n            taker_order_id: 0,\n            execution_price: 0,\n            execution_amount: 0,\n            maker_lo: 0,\n            maker_hi: 0,\n            taker_lo: 0,\n            taker_hi: 0,\n        };\n\n        // Check for crossing orders\n        let has_match = state.best_bid_price >= state.best_ask_price;\n        let has_liquidity = state.best_bid_amount > 0;\n        let has_ask = state.best_ask_amount > 0;\n\n        // Self-trade prevention\n        let same_owner_lo = state.best_bid_owner_lo == state.best_ask_owner_lo;\n        let same_owner_hi = state.best_bid_owner_hi == state.best_ask_owner_hi;\n        let is_self_trade = same_owner_lo && same_owner_hi;\n\n        if has_match && has_liquidity && has_ask && !is_self_trade {\n            // Calculate execution price (midpoint)\n            let execution_price = (state.best_bid_price + state.best_ask_price) / 2;\n\n            // Calculate execution amount (minimum of both)\n            let mut execution_amount = state.best_bid_amount;\n            if state.best_ask_amount < execution_amount {\n                execution_amount = state.best_ask_amount;\n            }\n\n            // Set result\n            result.matched = true;\n            result.maker_order_id = state.best_ask_id;\n            result.taker_order_id = state.best_bid_id;\n            result.execution_price = execution_price;\n            result.execution_amount = execution_amount;\n            result.maker_lo = state.best_ask_owner_lo;\n            result.maker_hi = state.best_ask_owner_hi;\n            result.taker_lo = state.best_bid_owner_lo;\n            result.taker_hi = state.best_bid_owner_hi;\n\n            // Update state - clear filled orders\n            let bid_remaining = state.best_bid_amount - execution_amount;\n            let ask_remaining = state.best_ask_amount - execution_amount;\n\n            if bid_remaining == 0 {\n                state.best_bid_price = 0;\n                state.best_bid_amount = 0;\n                state.best_bid_owner_lo = 0;\n                state.best_bid_owner_hi = 0;\n                state.best_bid_id = 0;\n            } else {\n                state.best_bid_amount = bid_remaining;\n            }\n\n            if ask_remaining == 0 {\n                state.best_ask_price = 18446744073709551615u64; // u64::MAX\n                state.best_ask_amount = 0;\n                state.best_ask_owner_lo = 0;\n                state.best_ask_owner_hi = 0;\n                state.best_ask_id = 0;\n            } else {\n                state.best_ask_amount = ask_remaining;\n            }\n        }\n\n        (state_ctxt.owner.from_arcis(state), result.reveal())\n    }\n}\n","code":[{"code":"self.owner","region":"Unknown"},{"code":"self.data","region":"Unknown"},{"code":"Self :: __arcis_inner(self.owner, self.data)","region":"Unknown"},{"code":"let new_order = order.to_arcis();","region":{"Known":[{"line":64,"column":8},{"line":64,"column":41}]}},{"code":"let mut state = state_ctxt.to_arcis();","region":{"Known":[{"line":65,"column":8},{"line":65,"column":46}]}},{"code":"new_order.side","region":{"Known":[{"line":67,"column":11},{"line":67,"column":25}]}},{"code":"new_order.price < state.best_ask_price","region":{"Known":[{"line":79,"column":15},{"line":79,"column":53}]}},{"code":"state.best_ask_price = new_order.price;","region":{"Known":[{"line":80,"column":16},{"line":80,"column":55}]}},{"code":"state.best_ask_amount = new_order.amount;","region":{"Known":[{"line":81,"column":16},{"line":81,"column":57}]}},{"code":"state.best_ask_owner_lo = new_order.owner_lo;","region":{"Known":[{"line":82,"column":16},{"line":82,"column":61}]}},{"code":"state.best_ask_owner_hi = new_order.owner_hi;","region":{"Known":[{"line":83,"column":16},{"line":83,"column":61}]}},{"code":"state.best_ask_id = new_order.order_id;","region":{"Known":[{"line":84,"column":16},{"line":84,"column":55}]}},{"code":"if new_order.price < state.best_ask_price\n{\n    state.best_ask_price = new_order.price; state.best_ask_amount =\n    new_order.amount; state.best_ask_owner_lo = new_order.owner_lo;\n    state.best_ask_owner_hi = new_order.owner_hi; state.best_ask_id =\n    new_order.order_id;\n}","region":{"Known":[{"line":79,"column":12},{"line":85,"column":13}]}},{"code":"new_order.price > state.best_bid_price","region":{"Known":[{"line":69,"column":15},{"line":69,"column":53}]}},{"code":"state.best_bid_price = new_order.price;","region":{"Known":[{"line":70,"column":16},{"line":70,"column":55}]}},{"code":"state.best_bid_amount = new_order.amount;","region":{"Known":[{"line":71,"column":16},{"line":71,"column":57}]}},{"code":"state.best_bid_owner_lo = new_order.owner_lo;","region":{"Known":[{"line":72,"column":16},{"line":72,"column":61}]}},{"code":"state.best_bid_owner_hi = new_order.owner_hi;","region":{"Known":[{"line":73,"column":16},{"line":73,"column":61}]}},{"code":"state.best_bid_id = new_order.order_id;","region":{"Known":[{"line":74,"column":16},{"line":74,"column":55}]}},{"code":"if new_order.price > state.best_bid_price\n{\n    state.best_bid_price = new_order.price; state.best_bid_amount =\n    new_order.amount; state.best_bid_owner_lo = new_order.owner_lo;\n    state.best_bid_owner_hi = new_order.owner_hi; state.best_bid_id =\n    new_order.order_id;\n}","region":{"Known":[{"line":69,"column":12},{"line":75,"column":13}]}},{"code":"if new_order.side\n{\n    if new_order.price > state.best_bid_price\n    {\n        state.best_bid_price = new_order.price; state.best_bid_amount =\n        new_order.amount; state.best_bid_owner_lo = new_order.owner_lo;\n        state.best_bid_owner_hi = new_order.owner_hi; state.best_bid_id =\n        new_order.order_id;\n    }\n} else\n{\n    if new_order.price < state.best_ask_price\n    {\n        state.best_ask_price = new_order.price; state.best_ask_amount =\n        new_order.amount; state.best_ask_owner_lo = new_order.owner_lo;\n        state.best_ask_owner_hi = new_order.owner_hi; state.best_ask_id =\n        new_order.order_id;\n    }\n}","region":{"Known":[{"line":67,"column":8},{"line":86,"column":9}]}},{"code":"state.order_count = state.order_count + 1;","region":{"Known":[{"line":87,"column":8},{"line":87,"column":50}]}},{"code":"state","region":{"Known":[{"line":89,"column":36},{"line":89,"column":41}]}},{"code":"self.nonce += 1;","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"self.from_arcis_inner(a)","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"let phantom = [a; 0];","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"phantom","region":"Unknown"},{"code":"let data = EncData { data, phantom };","region":"Unknown"},{"code":"owner","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"Self { owner, data }","region":"Unknown"},{"code":"Enc :: new_inner(self, a, self.from_arcis_inner(a))","region":"Unknown"},{"code":"state_ctxt.owner.from_arcis(state)","region":{"Known":[{"line":89,"column":8},{"line":89,"column":42}]}},{"code":"let target_id = order_id.to_arcis();","region":{"Known":[{"line":101,"column":8},{"line":101,"column":44}]}},{"code":"let target_owner_lo = owner_lo.to_arcis();","region":{"Known":[{"line":102,"column":8},{"line":102,"column":50}]}},{"code":"let target_owner_hi = owner_hi.to_arcis();","region":{"Known":[{"line":103,"column":8},{"line":103,"column":50}]}},{"code":"let mut state = state_ctxt.to_arcis();","region":{"Known":[{"line":104,"column":8},{"line":104,"column":46}]}},{"code":"let mut removed = false;","region":{"Known":[{"line":105,"column":8},{"line":105,"column":32}]}},{"code":"let is_best_bid = state.best_bid_id == target_id;","region":{"Known":[{"line":108,"column":8},{"line":108,"column":57}]}},{"code":"let bid_owner_match_lo = state.best_bid_owner_lo == target_owner_lo;","region":{"Known":[{"line":109,"column":8},{"line":109,"column":76}]}},{"code":"let bid_owner_match_hi = state.best_bid_owner_hi == target_owner_hi;","region":{"Known":[{"line":110,"column":8},{"line":110,"column":76}]}},{"code":"let bid_owner_match = bid_owner_match_lo && bid_owner_match_hi;","region":{"Known":[{"line":111,"column":8},{"line":111,"column":71}]}},{"code":"is_best_bid && bid_owner_match","region":{"Known":[{"line":113,"column":11},{"line":113,"column":41}]}},{"code":"state.best_bid_price = 0;","region":{"Known":[{"line":115,"column":12},{"line":115,"column":37}]}},{"code":"state.best_bid_amount = 0;","region":{"Known":[{"line":116,"column":12},{"line":116,"column":38}]}},{"code":"state.best_bid_owner_lo = 0;","region":{"Known":[{"line":117,"column":12},{"line":117,"column":40}]}},{"code":"state.best_bid_owner_hi = 0;","region":{"Known":[{"line":118,"column":12},{"line":118,"column":40}]}},{"code":"state.best_bid_id = 0;","region":{"Known":[{"line":119,"column":12},{"line":119,"column":34}]}},{"code":"removed = true;","region":{"Known":[{"line":120,"column":12},{"line":120,"column":27}]}},{"code":"if is_best_bid && bid_owner_match\n{\n    state.best_bid_price = 0; state.best_bid_amount = 0;\n    state.best_bid_owner_lo = 0; state.best_bid_owner_hi = 0;\n    state.best_bid_id = 0; removed = true;\n}","region":{"Known":[{"line":113,"column":8},{"line":121,"column":9}]}},{"code":"let is_best_ask = state.best_ask_id == target_id;","region":{"Known":[{"line":124,"column":8},{"line":124,"column":57}]}},{"code":"let ask_owner_match_lo = state.best_ask_owner_lo == target_owner_lo;","region":{"Known":[{"line":125,"column":8},{"line":125,"column":76}]}},{"code":"let ask_owner_match_hi = state.best_ask_owner_hi == target_owner_hi;","region":{"Known":[{"line":126,"column":8},{"line":126,"column":76}]}},{"code":"let ask_owner_match = ask_owner_match_lo && ask_owner_match_hi;","region":{"Known":[{"line":127,"column":8},{"line":127,"column":71}]}},{"code":"is_best_ask && ask_owner_match","region":{"Known":[{"line":129,"column":11},{"line":129,"column":41}]}},{"code":"state.best_ask_price = 18446744073709551615u64;","region":{"Known":[{"line":131,"column":12},{"line":131,"column":59}]}},{"code":"state.best_ask_amount = 0;","region":{"Known":[{"line":132,"column":12},{"line":132,"column":38}]}},{"code":"state.best_ask_owner_lo = 0;","region":{"Known":[{"line":133,"column":12},{"line":133,"column":40}]}},{"code":"state.best_ask_owner_hi = 0;","region":{"Known":[{"line":134,"column":12},{"line":134,"column":40}]}},{"code":"state.best_ask_id = 0;","region":{"Known":[{"line":135,"column":12},{"line":135,"column":34}]}},{"code":"removed = true;","region":{"Known":[{"line":136,"column":12},{"line":136,"column":27}]}},{"code":"if is_best_ask && ask_owner_match\n{\n    state.best_ask_price = 18446744073709551615u64; state.best_ask_amount = 0;\n    state.best_ask_owner_lo = 0; state.best_ask_owner_hi = 0;\n    state.best_ask_id = 0; removed = true;\n}","region":{"Known":[{"line":129,"column":8},{"line":137,"column":9}]}},{"code":"removed","region":{"Known":[{"line":139,"column":11},{"line":139,"column":18}]}},{"code":"state.order_count = state.order_count - 1;","region":{"Known":[{"line":140,"column":12},{"line":140,"column":54}]}},{"code":"if removed { state.order_count = state.order_count - 1; }","region":{"Known":[{"line":139,"column":8},{"line":141,"column":9}]}},{"code":"state","region":{"Known":[{"line":143,"column":37},{"line":143,"column":42}]}},{"code":"state_ctxt.owner.from_arcis(state)","region":{"Known":[{"line":143,"column":9},{"line":143,"column":43}]}},{"code":"removed.reveal()","region":{"Known":[{"line":143,"column":45},{"line":143,"column":61}]}},{"code":"(state_ctxt.owner.from_arcis(state), removed.reveal())","region":{"Known":[{"line":143,"column":8},{"line":143,"column":62}]}},{"code":"let mut state = state_ctxt.to_arcis();","region":{"Known":[{"line":152,"column":8},{"line":152,"column":46}]}},{"code":"false","region":{"Known":[{"line":156,"column":21},{"line":156,"column":26}]}},{"code":"0","region":{"Known":[{"line":157,"column":28},{"line":157,"column":29}]}},{"code":"0","region":{"Known":[{"line":158,"column":28},{"line":158,"column":29}]}},{"code":"0","region":{"Known":[{"line":159,"column":29},{"line":159,"column":30}]}},{"code":"0","region":{"Known":[{"line":160,"column":30},{"line":160,"column":31}]}},{"code":"0","region":{"Known":[{"line":161,"column":22},{"line":161,"column":23}]}},{"code":"0","region":{"Known":[{"line":162,"column":22},{"line":162,"column":23}]}},{"code":"0","region":{"Known":[{"line":163,"column":22},{"line":163,"column":23}]}},{"code":"0","region":{"Known":[{"line":164,"column":22},{"line":164,"column":23}]}},{"code":"let mut result = MatchResult\n{\n    matched : false, maker_order_id : 0, taker_order_id : 0, execution_price :\n    0, execution_amount : 0, maker_lo : 0, maker_hi : 0, taker_lo : 0,\n    taker_hi : 0,\n};","region":{"Known":[{"line":155,"column":8},{"line":165,"column":10}]}},{"code":"let has_match = state.best_bid_price >= state.best_ask_price;","region":{"Known":[{"line":168,"column":8},{"line":168,"column":69}]}},{"code":"let has_liquidity = state.best_bid_amount > 0;","region":{"Known":[{"line":169,"column":8},{"line":169,"column":54}]}},{"code":"let has_ask = state.best_ask_amount > 0;","region":{"Known":[{"line":170,"column":8},{"line":170,"column":48}]}},{"code":"let same_owner_lo = state.best_bid_owner_lo == state.best_ask_owner_lo;","region":{"Known":[{"line":173,"column":8},{"line":173,"column":79}]}},{"code":"let same_owner_hi = state.best_bid_owner_hi == state.best_ask_owner_hi;","region":{"Known":[{"line":174,"column":8},{"line":174,"column":79}]}},{"code":"let is_self_trade = same_owner_lo && same_owner_hi;","region":{"Known":[{"line":175,"column":8},{"line":175,"column":59}]}},{"code":"has_match && has_liquidity && has_ask && ! is_self_trade","region":{"Known":[{"line":177,"column":11},{"line":177,"column":66}]}},{"code":"state.best_bid_price + state.best_ask_price","region":{"Known":[{"line":179,"column":35},{"line":179,"column":78}]}},{"code":"let execution_price = (state.best_bid_price + state.best_ask_price) / 2;","region":{"Known":[{"line":179,"column":12},{"line":179,"column":84}]}},{"code":"let mut execution_amount = state.best_bid_amount;","region":{"Known":[{"line":182,"column":12},{"line":182,"column":61}]}},{"code":"state.best_ask_amount < execution_amount","region":{"Known":[{"line":183,"column":15},{"line":183,"column":55}]}},{"code":"execution_amount = state.best_ask_amount;","region":{"Known":[{"line":184,"column":16},{"line":184,"column":57}]}},{"code":"if state.best_ask_amount < execution_amount\n{ execution_amount = state.best_ask_amount; }","region":{"Known":[{"line":183,"column":12},{"line":185,"column":13}]}},{"code":"result.matched = true;","region":{"Known":[{"line":188,"column":12},{"line":188,"column":34}]}},{"code":"result.maker_order_id = state.best_ask_id;","region":{"Known":[{"line":189,"column":12},{"line":189,"column":54}]}},{"code":"result.taker_order_id = state.best_bid_id;","region":{"Known":[{"line":190,"column":12},{"line":190,"column":54}]}},{"code":"result.execution_price = execution_price;","region":{"Known":[{"line":191,"column":12},{"line":191,"column":53}]}},{"code":"result.execution_amount = execution_amount;","region":{"Known":[{"line":192,"column":12},{"line":192,"column":55}]}},{"code":"result.maker_lo = state.best_ask_owner_lo;","region":{"Known":[{"line":193,"column":12},{"line":193,"column":54}]}},{"code":"result.maker_hi = state.best_ask_owner_hi;","region":{"Known":[{"line":194,"column":12},{"line":194,"column":54}]}},{"code":"result.taker_lo = state.best_bid_owner_lo;","region":{"Known":[{"line":195,"column":12},{"line":195,"column":54}]}},{"code":"result.taker_hi = state.best_bid_owner_hi;","region":{"Known":[{"line":196,"column":12},{"line":196,"column":54}]}},{"code":"let bid_remaining = state.best_bid_amount - execution_amount;","region":{"Known":[{"line":199,"column":12},{"line":199,"column":73}]}},{"code":"let ask_remaining = state.best_ask_amount - execution_amount;","region":{"Known":[{"line":200,"column":12},{"line":200,"column":73}]}},{"code":"bid_remaining == 0","region":{"Known":[{"line":202,"column":15},{"line":202,"column":33}]}},{"code":"state.best_bid_amount = bid_remaining;","region":{"Known":[{"line":209,"column":16},{"line":209,"column":54}]}},{"code":"state.best_bid_price = 0;","region":{"Known":[{"line":203,"column":16},{"line":203,"column":41}]}},{"code":"state.best_bid_amount = 0;","region":{"Known":[{"line":204,"column":16},{"line":204,"column":42}]}},{"code":"state.best_bid_owner_lo = 0;","region":{"Known":[{"line":205,"column":16},{"line":205,"column":44}]}},{"code":"state.best_bid_owner_hi = 0;","region":{"Known":[{"line":206,"column":16},{"line":206,"column":44}]}},{"code":"state.best_bid_id = 0;","region":{"Known":[{"line":207,"column":16},{"line":207,"column":38}]}},{"code":"if bid_remaining == 0\n{\n    state.best_bid_price = 0; state.best_bid_amount = 0;\n    state.best_bid_owner_lo = 0; state.best_bid_owner_hi = 0;\n    state.best_bid_id = 0;\n} else { state.best_bid_amount = bid_remaining; }","region":{"Known":[{"line":202,"column":12},{"line":210,"column":13}]}},{"code":"ask_remaining == 0","region":{"Known":[{"line":212,"column":15},{"line":212,"column":33}]}},{"code":"state.best_ask_amount = ask_remaining;","region":{"Known":[{"line":219,"column":16},{"line":219,"column":54}]}},{"code":"state.best_ask_price = 18446744073709551615u64;","region":{"Known":[{"line":213,"column":16},{"line":213,"column":63}]}},{"code":"state.best_ask_amount = 0;","region":{"Known":[{"line":214,"column":16},{"line":214,"column":42}]}},{"code":"state.best_ask_owner_lo = 0;","region":{"Known":[{"line":215,"column":16},{"line":215,"column":44}]}},{"code":"state.best_ask_owner_hi = 0;","region":{"Known":[{"line":216,"column":16},{"line":216,"column":44}]}},{"code":"state.best_ask_id = 0;","region":{"Known":[{"line":217,"column":16},{"line":217,"column":38}]}},{"code":"if ask_remaining == 0\n{\n    state.best_ask_price = 18446744073709551615u64; state.best_ask_amount = 0;\n    state.best_ask_owner_lo = 0; state.best_ask_owner_hi = 0;\n    state.best_ask_id = 0;\n} else { state.best_ask_amount = ask_remaining; }","region":{"Known":[{"line":212,"column":12},{"line":220,"column":13}]}},{"code":"if has_match && has_liquidity && has_ask && ! is_self_trade\n{\n    let execution_price = (state.best_bid_price + state.best_ask_price) / 2;\n    let mut execution_amount = state.best_bid_amount; if state.best_ask_amount\n    < execution_amount { execution_amount = state.best_ask_amount; }\n    result.matched = true; result.maker_order_id = state.best_ask_id;\n    result.taker_order_id = state.best_bid_id; result.execution_price =\n    execution_price; result.execution_amount = execution_amount;\n    result.maker_lo = state.best_ask_owner_lo; result.maker_hi =\n    state.best_ask_owner_hi; result.taker_lo = state.best_bid_owner_lo;\n    result.taker_hi = state.best_bid_owner_hi; let bid_remaining =\n    state.best_bid_amount - execution_amount; let ask_remaining =\n    state.best_ask_amount - execution_amount; if bid_remaining == 0\n    {\n        state.best_bid_price = 0; state.best_bid_amount = 0;\n        state.best_bid_owner_lo = 0; state.best_bid_owner_hi = 0;\n        state.best_bid_id = 0;\n    } else { state.best_bid_amount = bid_remaining; } if ask_remaining == 0\n    {\n        state.best_ask_price = 18446744073709551615u64; state.best_ask_amount\n        = 0; state.best_ask_owner_lo = 0; state.best_ask_owner_hi = 0;\n        state.best_ask_id = 0;\n    } else { state.best_ask_amount = ask_remaining; }\n}","region":{"Known":[{"line":177,"column":8},{"line":221,"column":9}]}},{"code":"state","region":{"Known":[{"line":223,"column":37},{"line":223,"column":42}]}},{"code":"state_ctxt.owner.from_arcis(state)","region":{"Known":[{"line":223,"column":9},{"line":223,"column":43}]}},{"code":"result.reveal()","region":{"Known":[{"line":223,"column":45},{"line":223,"column":60}]}},{"code":"(state_ctxt.owner.from_arcis(state), result.reveal())","region":{"Known":[{"line":223,"column":8},{"line":223,"column":61}]}}]}
, 'instructions':
{"remove_order":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":1},{"code_idx":2,"before_size_id":0,"after_size_id":2},{"code_idx":38,"before_size_id":0,"after_size_id":2},{"code_idx":0,"before_size_id":2,"after_size_id":2},{"code_idx":1,"before_size_id":2,"after_size_id":2},{"code_idx":2,"before_size_id":2,"after_size_id":3},{"code_idx":39,"before_size_id":2,"after_size_id":3},{"code_idx":0,"before_size_id":3,"after_size_id":3},{"code_idx":1,"before_size_id":3,"after_size_id":3},{"code_idx":2,"before_size_id":3,"after_size_id":4},{"code_idx":40,"before_size_id":3,"after_size_id":4},{"code_idx":0,"before_size_id":4,"after_size_id":4},{"code_idx":1,"before_size_id":4,"after_size_id":4},{"code_idx":2,"before_size_id":4,"after_size_id":5},{"code_idx":41,"before_size_id":4,"after_size_id":5},{"code_idx":42,"before_size_id":5,"after_size_id":6},{"code_idx":43,"before_size_id":6,"after_size_id":7},{"code_idx":44,"before_size_id":7,"after_size_id":8},{"code_idx":45,"before_size_id":8,"after_size_id":9},{"code_idx":46,"before_size_id":9,"after_size_id":10},{"code_idx":47,"before_size_id":10,"after_size_id":10},{"code_idx":48,"before_size_id":11,"after_size_id":11},{"code_idx":49,"before_size_id":11,"after_size_id":11},{"code_idx":50,"before_size_id":11,"after_size_id":11},{"code_idx":51,"before_size_id":11,"after_size_id":11},{"code_idx":52,"before_size_id":11,"after_size_id":11},{"code_idx":53,"before_size_id":11,"after_size_id":12},{"code_idx":54,"before_size_id":10,"after_size_id":13},{"code_idx":55,"before_size_id":13,"after_size_id":14},{"code_idx":56,"before_size_id":14,"after_size_id":15},{"code_idx":57,"before_size_id":15,"after_size_id":16},{"code_idx":58,"before_size_id":16,"after_size_id":17},{"code_idx":59,"before_size_id":17,"after_size_id":17},{"code_idx":60,"before_size_id":18,"after_size_id":18},{"code_idx":61,"before_size_id":18,"after_size_id":19},{"code_idx":62,"before_size_id":19,"after_size_id":19},{"code_idx":63,"before_size_id":19,"after_size_id":19},{"code_idx":64,"before_size_id":19,"after_size_id":19},{"code_idx":65,"before_size_id":19,"after_size_id":19},{"code_idx":66,"before_size_id":17,"after_size_id":20},{"code_idx":67,"before_size_id":20,"after_size_id":20},{"code_idx":68,"before_size_id":20,"after_size_id":21},{"code_idx":69,"before_size_id":20,"after_size_id":22},{"code_idx":70,"before_size_id":22,"after_size_id":22},{"code_idx":23,"before_size_id":22,"after_size_id":23},{"code_idx":24,"before_size_id":23,"after_size_id":23},{"code_idx":25,"before_size_id":23,"after_size_id":23},{"code_idx":26,"before_size_id":23,"after_size_id":23},{"code_idx":27,"before_size_id":23,"after_size_id":24},{"code_idx":28,"before_size_id":24,"after_size_id":24},{"code_idx":29,"before_size_id":24,"after_size_id":24},{"code_idx":30,"before_size_id":24,"after_size_id":24},{"code_idx":31,"before_size_id":24,"after_size_id":24},{"code_idx":32,"before_size_id":24,"after_size_id":24},{"code_idx":33,"before_size_id":24,"after_size_id":24},{"code_idx":34,"before_size_id":24,"after_size_id":24},{"code_idx":35,"before_size_id":24,"after_size_id":24},{"code_idx":36,"before_size_id":23,"after_size_id":24},{"code_idx":71,"before_size_id":22,"after_size_id":24},{"code_idx":72,"before_size_id":24,"after_size_id":25},{"code_idx":73,"before_size_id":22,"after_size_id":25}]},"match_book":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":1},{"code_idx":2,"before_size_id":0,"after_size_id":2},{"code_idx":74,"before_size_id":0,"after_size_id":2},{"code_idx":75,"before_size_id":2,"after_size_id":3},{"code_idx":76,"before_size_id":3,"after_size_id":3},{"code_idx":77,"before_size_id":3,"after_size_id":3},{"code_idx":78,"before_size_id":3,"after_size_id":3},{"code_idx":79,"before_size_id":3,"after_size_id":3},{"code_idx":80,"before_size_id":3,"after_size_id":3},{"code_idx":81,"before_size_id":3,"after_size_id":3},{"code_idx":82,"before_size_id":3,"after_size_id":3},{"code_idx":83,"before_size_id":3,"after_size_id":3},{"code_idx":84,"before_size_id":2,"after_size_id":3},{"code_idx":85,"before_size_id":3,"after_size_id":4},{"code_idx":86,"before_size_id":4,"after_size_id":5},{"code_idx":87,"before_size_id":5,"after_size_id":6},{"code_idx":88,"before_size_id":6,"after_size_id":7},{"code_idx":89,"before_size_id":7,"after_size_id":8},{"code_idx":90,"before_size_id":8,"after_size_id":9},{"code_idx":91,"before_size_id":9,"after_size_id":10},{"code_idx":92,"before_size_id":11,"after_size_id":12},{"code_idx":93,"before_size_id":11,"after_size_id":13},{"code_idx":94,"before_size_id":13,"after_size_id":13},{"code_idx":95,"before_size_id":13,"after_size_id":14},{"code_idx":96,"before_size_id":14,"after_size_id":14},{"code_idx":97,"before_size_id":13,"after_size_id":15},{"code_idx":98,"before_size_id":15,"after_size_id":16},{"code_idx":99,"before_size_id":16,"after_size_id":17},{"code_idx":100,"before_size_id":17,"after_size_id":18},{"code_idx":101,"before_size_id":18,"after_size_id":18},{"code_idx":102,"before_size_id":18,"after_size_id":18},{"code_idx":103,"before_size_id":18,"after_size_id":18},{"code_idx":104,"before_size_id":18,"after_size_id":18},{"code_idx":105,"before_size_id":18,"after_size_id":18},{"code_idx":106,"before_size_id":18,"after_size_id":18},{"code_idx":107,"before_size_id":18,"after_size_id":19},{"code_idx":108,"before_size_id":19,"after_size_id":20},{"code_idx":109,"before_size_id":20,"after_size_id":21},{"code_idx":110,"before_size_id":21,"after_size_id":21},{"code_idx":111,"before_size_id":21,"after_size_id":21},{"code_idx":112,"before_size_id":21,"after_size_id":21},{"code_idx":113,"before_size_id":21,"after_size_id":21},{"code_idx":114,"before_size_id":21,"after_size_id":21},{"code_idx":115,"before_size_id":21,"after_size_id":21},{"code_idx":116,"before_size_id":20,"after_size_id":22},{"code_idx":117,"before_size_id":22,"after_size_id":23},{"code_idx":118,"before_size_id":23,"after_size_id":23},{"code_idx":119,"before_size_id":23,"after_size_id":23},{"code_idx":120,"before_size_id":23,"after_size_id":23},{"code_idx":121,"before_size_id":23,"after_size_id":23},{"code_idx":122,"before_size_id":23,"after_size_id":23},{"code_idx":123,"before_size_id":23,"after_size_id":23},{"code_idx":124,"before_size_id":22,"after_size_id":24},{"code_idx":125,"before_size_id":9,"after_size_id":25},{"code_idx":126,"before_size_id":25,"after_size_id":25},{"code_idx":23,"before_size_id":25,"after_size_id":26},{"code_idx":24,"before_size_id":26,"after_size_id":26},{"code_idx":25,"before_size_id":26,"after_size_id":26},{"code_idx":26,"before_size_id":26,"after_size_id":26},{"code_idx":27,"before_size_id":26,"after_size_id":27},{"code_idx":28,"before_size_id":27,"after_size_id":27},{"code_idx":29,"before_size_id":27,"after_size_id":27},{"code_idx":30,"before_size_id":27,"after_size_id":27},{"code_idx":31,"before_size_id":27,"after_size_id":27},{"code_idx":32,"before_size_id":27,"after_size_id":27},{"code_idx":33,"before_size_id":27,"after_size_id":27},{"code_idx":34,"before_size_id":27,"after_size_id":27},{"code_idx":35,"before_size_id":27,"after_size_id":27},{"code_idx":36,"before_size_id":26,"after_size_id":27},{"code_idx":127,"before_size_id":25,"after_size_id":27},{"code_idx":128,"before_size_id":27,"after_size_id":28},{"code_idx":129,"before_size_id":25,"after_size_id":28}]},"add_order":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":1},{"code_idx":2,"before_size_id":0,"after_size_id":2},{"code_idx":3,"before_size_id":0,"after_size_id":2},{"code_idx":0,"before_size_id":2,"after_size_id":2},{"code_idx":1,"before_size_id":2,"after_size_id":2},{"code_idx":2,"before_size_id":2,"after_size_id":3},{"code_idx":4,"before_size_id":2,"after_size_id":3},{"code_idx":5,"before_size_id":3,"after_size_id":3},{"code_idx":6,"before_size_id":3,"after_size_id":4},{"code_idx":7,"before_size_id":4,"after_size_id":4},{"code_idx":8,"before_size_id":4,"after_size_id":5},{"code_idx":9,"before_size_id":5,"after_size_id":6},{"code_idx":10,"before_size_id":6,"after_size_id":7},{"code_idx":11,"before_size_id":7,"after_size_id":8},{"code_idx":12,"before_size_id":3,"after_size_id":9},{"code_idx":13,"before_size_id":9,"after_size_id":10},{"code_idx":14,"before_size_id":10,"after_size_id":10},{"code_idx":15,"before_size_id":10,"after_size_id":10},{"code_idx":16,"before_size_id":10,"after_size_id":10},{"code_idx":17,"before_size_id":10,"after_size_id":10},{"code_idx":18,"before_size_id":10,"after_size_id":10},{"code_idx":19,"before_size_id":9,"after_size_id":11},{"code_idx":20,"before_size_id":3,"after_size_id":12},{"code_idx":21,"before_size_id":12,"after_size_id":13},{"code_idx":22,"before_size_id":13,"after_size_id":13},{"code_idx":23,"before_size_id":13,"after_size_id":14},{"code_idx":24,"before_size_id":14,"after_size_id":14},{"code_idx":25,"before_size_id":14,"after_size_id":14},{"code_idx":26,"before_size_id":14,"after_size_id":14},{"code_idx":27,"before_size_id":14,"after_size_id":15},{"code_idx":28,"before_size_id":15,"after_size_id":15},{"code_idx":29,"before_size_id":15,"after_size_id":15},{"code_idx":30,"before_size_id":15,"after_size_id":15},{"code_idx":31,"before_size_id":15,"after_size_id":15},{"code_idx":32,"before_size_id":15,"after_size_id":15},{"code_idx":33,"before_size_id":15,"after_size_id":15},{"code_idx":34,"before_size_id":15,"after_size_id":15},{"code_idx":35,"before_size_id":15,"after_size_id":15},{"code_idx":36,"before_size_id":14,"after_size_id":15},{"code_idx":37,"before_size_id":13,"after_size_id":15}]}}
, 'instruction_locations':
{"match_book":{"Known":[{"line":148,"column":4},{"line":148,"column":18}]},"add_order":{"Known":[{"line":59,"column":4},{"line":59,"column":18}]},"remove_order":{"Known":[{"line":94,"column":4},{"line":94,"column":18}]}}
};
